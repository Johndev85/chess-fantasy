---
// Piece.astro - Componente de pieza individual
interface Props {
  type: 'pawn' | 'knight' | 'bishop' | 'rook' | 'queen' | 'king';
  color: 'white' | 'black';
  id?: string;
}

const { type, color, id } = Astro.props;

// SVG de piezas estilo pixel-art
const pieceSvgs = {
  white: {
    pawn: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="13" y="4" width="6" height="6" fill="#F5F5DC"/>
      <rect x="11" y="10" width="10" height="4" fill="#F5F5DC"/>
      <rect x="12" y="14" width="8" height="8" fill="#F5F5DC"/>
      <rect x="10" y="22" width="12" height="6" fill="#F5F5DC"/>
      <rect x="13" y="6" width="2" height="2" fill="#8B7355"/>
    </svg>`,
    knight: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 28h16v4H8z" fill="#F5F5DC"/>
      <rect x="9" y="20" width="14" height="8" fill="#F5F5DC"/>
      <rect x="10" y="12" width="12" height="8" fill="#F5F5DC"/>
      <rect x="14" y="6" width="6" height="6" fill="#F5F5DC"/>
      <rect x="20" y="8" width="4" height="4" fill="#F5F5DC"/>
      <rect x="16" y="8" width="2" height="2" fill="#4169E1"/>
    </svg>`,
    bishop: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="13" y="2" width="6" height="4" fill="#F5F5DC"/>
      <rect x="11" y="6" width="10" height="6" fill="#F5F5DC"/>
      <rect x="10" y="12" width="12" height="8" fill="#F5F5DC"/>
      <rect x="11" y="20" width="10" height="4" fill="#F5F5DC"/>
      <rect x="8" y="24" width="16" height="6" fill="#F5F5DC"/>
      <circle cx="16" cy="9" r="2" fill="#9C27B0"/>
    </svg>`,
    rook: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="6" y="4" width="4" height="4" fill="#F5F5DC"/>
      <rect x="22" y="4" width="4" height="4" fill="#F5F5DC"/>
      <rect x="14" y="4" width="4" height="4" fill="#F5F5DC"/>
      <rect x="6" y="8" width="20" height="4" fill="#F5F5DC"/>
      <rect x="8" y="12" width="16" height="10" fill="#F5F5DC"/>
      <rect x="7" y="22" width="18" height="6" fill="#F5F5DC"/>
    </svg>`,
    queen: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="6" cy="6" r="3" fill="#F5F5DC"/>
      <circle cx="16" cy="4" r="3" fill="#F5F5DC"/>
      <circle cx="26" cy="6" r="3" fill="#F5F5DC"/>
      <rect x="8" y="8" width="16" height="6" fill="#F5F5DC"/>
      <rect x="10" y="14" width="12" height="8" fill="#F5F5DC"/>
      <rect x="8" y="22" width="16" height="6" fill="#F5F5DC"/>
      <circle cx="16" cy="11" r="2" fill="#FFD700"/>
    </svg>`,
    king: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="14" y="2" width="4" height="4" fill="#F5F5DC"/>
      <rect x="10" y="6" width="12" height="4" fill="#F5F5DC"/>
      <rect x="14" y="10" width="4" height="6" fill="#F5F5DC"/>
      <rect x="9" y="12" width="14" height="8" fill="#F5F5DC"/>
      <rect x="10" y="20" width="12" height="4" fill="#F5F5DC"/>
      <rect x="8" y="24" width="16" height="6" fill="#F5F5DC"/>
      <rect x="15" y="4" width="2" height="4" fill="#FFD700"/>
    </svg>`
  },
  black: {
    pawn: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="13" y="4" width="6" height="6" fill="#2F2F2F"/>
      <rect x="11" y="10" width="10" height="4" fill="#2F2F2F"/>
      <rect x="12" y="14" width="8" height="8" fill="#2F2F2F"/>
      <rect x="10" y="22" width="12" height="6" fill="#2F2F2F"/>
      <rect x="13" y="6" width="2" height="2" fill="#FF0000"/>
    </svg>`,
    knight: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 28h16v4H8z" fill="#2F2F2F"/>
      <rect x="9" y="20" width="14" height="8" fill="#2F2F2F"/>
      <rect x="10" y="12" width="12" height="8" fill="#2F2F2F"/>
      <rect x="14" y="6" width="6" height="6" fill="#2F2F2F"/>
      <rect x="20" y="8" width="4" height="4" fill="#2F2F2F"/>
      <rect x="16" y="8" width="2" height="2" fill="#FF0000"/>
    </svg>`,
    bishop: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="13" y="2" width="6" height="4" fill="#2F2F2F"/>
      <rect x="11" y="6" width="10" height="6" fill="#2F2F2F"/>
      <rect x="10" y="12" width="12" height="8" fill="#2F2F2F"/>
      <rect x="11" y="20" width="10" height="4" fill="#2F2F2F"/>
      <rect x="8" y="24" width="16" height="6" fill="#2F2F2F"/>
      <circle cx="16" cy="9" r="2" fill="#FF0000"/>
    </svg>`,
    rook: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="6" y="4" width="4" height="4" fill="#2F2F2F"/>
      <rect x="22" y="4" width="4" height="4" fill="#2F2F2F"/>
      <rect x="14" y="4" width="4" height="4" fill="#2F2F2F"/>
      <rect x="6" y="8" width="20" height="4" fill="#2F2F2F"/>
      <rect x="8" y="12" width="16" height="10" fill="#2F2F2F"/>
      <rect x="7" y="22" width="18" height="6" fill="#2F2F2F"/>
    </svg>`,
    queen: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="6" cy="6" r="3" fill="#2F2F2F"/>
      <circle cx="16" cy="4" r="3" fill="#2F2F2F"/>
      <circle cx="26" cy="6" r="3" fill="#2F2F2F"/>
      <rect x="8" y="8" width="16" height="6" fill="#2F2F2F"/>
      <rect x="10" y="14" width="12" height="8" fill="#2F2F2F"/>
      <rect x="8" y="22" width="16" height="6" fill="#2F2F2F"/>
      <circle cx="16" cy="11" r="2" fill="#FF0000"/>
    </svg>`,
    king: `<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="14" y="2" width="4" height="4" fill="#2F2F2F"/>
      <rect x="10" y="6" width="12" height="4" fill="#2F2F2F"/>
      <rect x="14" y="10" width="4" height="6" fill="#2F2F2F"/>
      <rect x="9" y="12" width="14" height="8" fill="#2F2F2F"/>
      <rect x="10" y="20" width="12" height="4" fill="#2F2F2F"/>
      <rect x="8" y="24" width="16" height="6" fill="#2F2F2F"/>
      <rect x="15" y="4" width="2" height="4" fill="#FF0000"/>
    </svg>`
  }
};

const pieceNames = {
  pawn: 'Pe√≥n',
  knight: 'Caballo',
  bishop: 'Alfil',
  rook: 'Torre',
  queen: 'Reina',
  king: 'Rey'
};

const svgContent = pieceSvgs[color][type];
const pieceName = pieceNames[type];
---

<div 
  class="chess-piece" 
  data-type={type} 
  data-color={color}
  data-id={id}
  draggable="true"
>
  <div class="piece-sprite" set:html={svgContent} />
  <span class="piece-tooltip">{pieceName}</span>
</div>

<style lang="scss">
  @use '../styles/components/pieces' as *;
</style>
